<head>
  <title>Sink or Submit!</title>
</head>

<body>
	<!-- Put if block around this to only show the user area when there's a user logged in
	     otherwise, the login area appears in the main wrapper div -->
	<div class="login">
		{{> loginButtons}}
	</div>
	<div class="wrapper">
		<div class="header">
			<div calss="header-center">
				<h1>Sink or Submit!</h1>
			</div>
		</div>
		<div class="clear"><br /></div>

		{{#if currentUser}}
		<div class="user">
			<div class="userdata">
				<h1>{{currentUser.username}} ({{userScore}})</h1>
				{{> userGroup}}
				<!-- Get a different trophy picture? -->
				{{> trophy}}

				<br />

				{{> statUpdate}}
				{{> userStats}}
				<!--{{> statBar}}-->
			</div>
		</div>
		<div class="leaderboard">
				{{> leaderboard}}
		</div>
		{{else}}
		<!-- Next up: put a login area here when a user isn't logged in -->
		<h1>You must be logged in to use this feature</h1>
		{{/if}}

		<div class="clear"></div>
		<div class="notice">
			<p>
				Sink or Submit is based on a game invented by <a href="https://twitter.com/rachaelkjones" target="_blank">@rachaelkjones</a> and given minor internet notoriety by 
				<a href="https://twitter.com/ghostwritingcow" target="_blank">@ghostwritingcow</a>.
				<br />
				It was developed by <a href="https://twitter.com/hbbisenieks" target="_blank">@HBBisenieks</a>.
			</p>
			<p>
				Sink or Submit is released under an MIT license. The source code is available on <a href="https://github.com/hbbisenieks/submissions-game/" target="_blank">GitHub</a>. Fork it!
			</p>
		</div>
	</div>
</body>

<template name="userGroup">
	{{#if inGroup}}
		<h3>{{groupName}}</h3>
	{{else}}
		{{> joinGroup}}
	{{/if}}
</template>

<template name="joinGroup">
	<form>
		<input type="radio" name="group-select" value="join">Join an Existing Group<br />
		<input type="radio" name="group-select" value="create">Create a New Group
	</form>
	<form class="groupName">
		<input type="text" name="groupName" placeholder="Enter group name" />
	</form>
</template>

<template name="statUpdate">
	<button class="subPlus">S +</button>
	<button class="rejPlus">R +</button>
	<button class="accPlus">A +</button>
	<button class="wdPlus">W +</button>
	<br />
	<button class="subMinus">S -</button>
	<button class="rejMinus">R -</button>
	<button class="accMinus">A -</button>
	<button class="wdMinus">W -</button>
</template>

<template name="trophy">
	{{#if leading}}
		<img src='trophy.png' alt='Current Leader!' height='40%' width='40%' />
	{{/if}}
</template>

<template name="userStats">
	<p>Stats</p>
	<ul>
		<li>Submissions: {{userSubs}}</li>
		<li>Rejections: {{userRejections}}</li>
		<li>Acceptances: {{userAccept}}</li>
		<li>Withdrawals: {{userWithdraw}}</li>
	</ul>
	<p>Score: {{userScore}}</p>
</template>

<template name="statBar">
<!-- Not working right now, maybe replace with pie chart? -->
	<div class="statbar">
		<div class="rejs" style="width:{{rejWidth}}%"></div>
		<div class="accs" style="width:{{accWidth}}%"></div>
	</div>
</template>

<template name="leaderboard">
	<h1>Leaderboard</h1>
	<div class="clear"></div>
	<div class="score">
			{{#each writer}}
			<p>{{score}}</p>
			{{/each}}
	</div>
	<div class="stats">
			{{#each writer}}
			<p>{{subs}}/{{rejs}}/{{accs}}/{{wds}}</p>
			{{/each}}
	</div>
	<div class="name">
			{{#each writer}}
			<p>{{username}}</p>
			{{/each}}
	</div>
</template>
